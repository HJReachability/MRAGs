\section{Introduction}
% Applications of differential games/reach-avoid games
% - CTF
% - warehouse robots
% - air traffic control
% - etc.

Multiplayer reach-avoid games are differential games between two adversarial teams of cooperative players playing on a compact domain with obstacles. One team, called the attacking team, aims to send as many team members, called attackers, to some target set as quickly as possible. The other team, called the defending team, seeks to delay or prevent the attacking team from doing so by attempting to capture the attackers. Such differential games have been studied extensively \cite{HThesis, Huang2011}, and are not only useful in analyzing games such as Capture-the-Flag (CTF), which was explored most notably in the Cornell Roboflag competition \cite{Earl:2007p101, Campbell:2003p5, Waydo:2003p97, Parasuraman:2005p99}. The multiplayer reach-avoid game that we present in this paper is also a powerful theoretical tool for analyzing realistic situations. Potential applications include autonomous robots maneuvering in a warehouse trying to reach preset destinations while avoiding other robots, and aircrafts trying to reach a target airport while avoiding other aircrafts in the vicinity, among other applications in robotics, aircraft control, security, and other domains \cite{OFTHEAIRFORCEWASHINGTON:2009p37, Erzberger:2006p44, kiva2009}.

% Reach-avoid game difficulty 
% - unintuitive
% - exponential scaling
% - previous solution attempts not general

The multiplayer reach-avoid game is difficult to analyze for several reasons. First, the two teams have conflicting and asymmetric goals while at the same time, complex cooperation among the players within each team may exist. The optimal control for each player is difficult to intuit and visualize even in the case of a 1 vs. 1 game, in which human players sometimes lose in situations in which an optimal winning strategy exists \cite{HThesis, Huang2011}. Also, in the general multiplayer reach-avoid game, optimal solutions are impossible to compute using traditional dynamic programming approaches due to the intrinsic high dimensionality of the joint state space. 

Multiplayer differential games have been previously addressed using various techniques. In \cite{Earl:2007p101}, where a team of defenders assumes that the attackers move towards their target in straight lines, a mixed-integer linear programming approach was used. In \cite{Chasparis:2005p102}, optimal defender strategies could also be determined using a mixed integer linear program, with the assumption that the attackers use a linear feedback control law; the mixed integer linear program was then relaxed and a linear program was solved instead. In complex pursuit-evasion games where players may change roles over time, a nonlinear model-predictive control \cite{Sprinkle:2004p100} approach has been investigated. In this case, a cost function of the opponent was assumed, and opponent strategies were estimated based on an explicit prediction model. Approximate dynamic programming (ADP) \cite{McGrew:2008p103} has also been used to analyze reach-avoid games. While in some cases ADP provides good estimates of the value function that would be obtained from dynamic programming, guarantees on the direction of conservatism typically cannot be made.

% Previous most-related work and shortcomings
% - HJI: optimal but intractible
% - open-loop: fast but conservative
Although the above techniques provide some useful insight into multiplayer differential games, they only work well when strong assumptions are made or when accurate models of the opposing team can be obtained. Furthermore, the techniques cannot be easily adapted to solve a general multiplayer reach-avoid game when no prior information of the control strategies of each team is known. To solve general reach-avoid games, the Hamilton-Jacobi-Isaacs (HJI) approach \cite{b:isaacs-1967} is ideal when the game is low-dimensional. The approach involves solving an HJI partial differential equation (PDE) on a grid to compute a reach-avoid set in the joint state space of the players. The reach-avoid set partitions the joint state space of the players into a winning region for the defending team and a winning region for the attacking team, assuming both sides play optimally. The optimal strategies can then be extracted from the gradient of the solution to the HJI PDE. This approach is particularly useful because of the many numerical tools \cite{j:mitchell-TAC-2005, Sethian1996, b:osher-fedkiw-2002} available to numerically solve the HJI PDE, and has been able to solve a variety of optimal control problems such as aircraft collision avoidance \cite{j:mitchell-TAC-2005}, automated in-flight refueling \cite{DSST08}, and two-player reach-avoid games \cite{Huang2011}. The advantage of the HJI approach is that it can be applied to a large variety of player dynamics and does not explicitly assume any control strategy or prediction models for the players. However, the approach cannot be directly applied to our multiplayer reach-avoid game because the complexity of solving a PDE on a grid scales exponentially with the number of players, making the approach only applicable to the two-player game. Even in the two-player case, the memory requirement is significant even for a relatively coarse grid. Therefore, when analyzing the multiplayer reach-avoid game, complexity-optimality trade-offs must be made.

\cite{Zhou2012} presented an open-loop approach to approximate the solution to the two-player reach-avoid game, in which the time for the attacker to reach the target was conservatively estimated by assuming that the defender first chooses an open-loop control strategy, after which the attacker chooses a control strategy in response. The open-loop approach utilizes a modified version of the fast marching method (FMM) \cite{Sethian1996,Zhou2012}, and is extremely computationally efficient. Another advantage of this approach is that it is conservative towards the defender and provides guarantees on the defender's performance. However, the degree of conservatism can be very high because the defender is assumed to use an open-loop control strategy. The open-loop approach, therefore, can be considered an extreme trade off between the complexity of solving the HJI PDE and the optimality of the control strategy. 

% Current paper contributions
% - two-player to multiplayer
% - HJI solution: powerful for identical dynamics within each team
% - PD solution: efficient, more general dynamics within each team, better scaling
Our contributions in this paper are in the analysis of both the two-player reach-avoid game and the multiplayer reach-avoid game.  For the two-player reach-avoid game, we present two methods for solving it to characterize pairwise outcomes between the players of opposite teams. First, we present the HJI solution to the two-player game \cite{Huang2011}, which computes a four-dimensional (4D) reach-avoid set that determines which player wins the game assuming both players use the closed-loop optimal control strategy. The 4D reach-avoid set can also provide the optimal controls, and be used to provide real-time updates to the pairwise outcomes at virtually no additional computation cost. Next, we present the new ``path defense" solution, an efficient and conservative approximation to the HJI solution in which the defenders utilize a ``semi-open-loop" control strategy. This path defense approach conservatively approximates two-dimensional (2D) slices of the reach-avoid sets given by the HJI solution by solving a series of 2D Eikonal equations using FMM, while maintaining guarantees on the defending team's performance. The computation complexity in the path defense approach is thus vastly reduced compared to the HJI approach, and the degree of conservatism is much lower than the degree of conservatism in the open-loop approach. Furthermore, the path defense approach is scales only linearly with the number of players on each team, as opposed to quadratically in the HJI approach.

For the multiplayer reach-avoid game, we propose a novel way of approximating its solution by merging together the $\N^2$ pairwise outcomes in the game using the graph theoretic maximum matching, which can be efficiently computed by known algorithms \cite{Schrjiver2004, Karpinski1998}. We investigate several nuances associated with applying maximum matching to the HJI solution and the path defense solution to the two-player game. In particular, we will show that in the case in which the players on each team have identical dynamics, only a \textit{single} HJI PDE needs to be solved to characterize \textit{all} pairwise outcomes. Furthermore, we show that in general, when applying maximum matching to the two-player path defense solution, the computational complexity scales linearly with the number of players, as opposed to quadratically in the HJI approach.